<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô - ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ö‡∏≤‡∏á‡∏™‡∏∞‡∏û‡∏≤‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Sarabun', sans-serif; }
    /* ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Form ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô */
    #formSection { display: none; }
    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå Input */
    .input-group label { display: block; font-weight: bold; margin-bottom: 5px; color: #1e3a8a; }
    .input-group input, .input-group select { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 6px; }
    .section-head { background: #e0f2fe; padding: 10px; font-weight: bold; color: #0c4a6e; border-left: 4px solid #0284c7; margin-top: 20px; margin-bottom: 10px; }
  </style>
</head>
<body class="bg-gray-100">

  <div id="loginSection" class="min-h-screen flex flex-col md:flex-row">
    <div class="md:w-1/2 bg-blue-900 flex flex-col justify-center items-center text-white p-10">
      <h1 class="text-4xl font-bold mb-4">‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h1>
      <h2 class="text-2xl opacity-90">‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ö‡∏≤‡∏á‡∏™‡∏∞‡∏û‡∏≤‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</h2>
      <div class="mt-8 text-center text-blue-200">
        <p>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</p>
        <p>‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ 2568</p>
      </div>
    </div>
    
    <div class="md:w-1/2 bg-white flex flex-col justify-center items-center p-8">
      <div class="w-full max-w-md">
        <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö / ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h3>
        
        <form onsubmit="handleLogin(event)" class="space-y-4">
          <div>
            <label class="block text-gray-700 mb-2">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô (13 ‡∏´‡∏•‡∏±‡∏Å)</label>
            <input type="text" id="loginIdCard" maxlength="13" required 
                   class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-xl text-center tracking-widest"
                   placeholder="‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏Ç‡∏µ‡∏î (-)">
          </div>
          <button type="submit" id="btnLogin" class="w-full bg-blue-900 text-white py-4 rounded-lg font-bold text-lg hover:bg-blue-800 transition">
            ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
          </button>
        </form>
        <p class="mt-4 text-sm text-gray-500 text-center">
          * ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏´‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏¢‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
        </p>
      </div>
    </div>
  </div>

  <div id="formSection" class="p-4 md:p-8 max-w-5xl mx-auto">
    <div class="bg-white p-6 md:p-10 rounded-xl shadow-xl">
      <div class="flex justify-between items-center mb-6 border-b pb-4">
        <div>
           <h2 class="text-2xl font-bold text-blue-900">‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h2>
           <p class="text-gray-600">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠: <span id="lastUpdateDate">-</span></p>
        </div>
        <button onclick="logout()" class="text-red-600 hover:text-red-800 underline">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
      </div>

      <form id="appForm" onsubmit="submitForm(event)">
        <div class="section-head">1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£</div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="input-group"><label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</label><select id="serviceArea"><option>‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</option><option>‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≠‡∏Å‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</option></select></div>
          <div class="input-group"><label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label><select id="program"><option>‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡πå - ‡∏Ñ‡∏ì‡∏¥‡∏ï</option><option>‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô EIS</option><option>‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô S&M</option><option>‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô GATE</option></select></div>
          <div class="input-group md:col-span-2"><label>‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏î‡∏¥‡∏°</label><input type="text" id="oldSchool"></div>
        </div>

        <div class="mt-4 p-4 bg-gray-50 rounded border">
          <label class="font-bold mb-2 block">‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£</label>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
             <label class="flex items-center gap-2"><input type="checkbox" name="docs" value="‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"> ‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
             <label class="flex items-center gap-2"><input type="checkbox" name="docs" value="‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏™‡∏π‡∏ï‡∏¥‡∏ö‡∏±‡∏ï‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"> ‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏™‡∏π‡∏ï‡∏¥‡∏ö‡∏±‡∏ï‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
             <label class="flex items-center gap-2"><input type="checkbox" name="docs" value="‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏ö‡∏¥‡∏î‡∏≤"> ‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏ö‡∏¥‡∏î‡∏≤</label>
             <label class="flex items-center gap-2"><input type="checkbox" name="docs" value="‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏≤‡∏£‡∏î‡∏≤"> ‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏≤‡∏£‡∏î‡∏≤</label>
             <label class="flex items-center gap-2"><input type="checkbox" name="docs" value="‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á"> ‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á</label>
             <label class="flex items-center gap-2"><input type="checkbox" name="docs" value="‡∏õ‡∏û.1 ‡∏´‡∏£‡∏∑‡∏≠ ‡∏õ‡∏û.7"> ‡∏õ‡∏û.1 ‡∏´‡∏£‡∏∑‡∏≠ ‡∏õ‡∏û.7</label>
             <div class="md:col-span-2 flex items-center gap-2">
               <input type="checkbox" name="docs" value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ"> ‡∏≠‡∏∑‡πà‡∏ô‡πÜ: <input type="text" id="docOther" class="border-b border-gray-300 w-full p-1 ml-2">
             </div>
          </div>
        </div>

        <div class="section-head">2. ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</div>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="input-group"><label>‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤</label><select id="prefix"><option>‡∏î.‡∏ä.</option><option>‡∏î.‡∏ç.</option><option>‡∏ô‡∏≤‡∏¢</option><option>‡∏ô.‡∏™.</option></select></div>
          <div class="input-group md:col-span-3"><label>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• (‡πÑ‡∏ó‡∏¢)</label><div class="flex gap-2"><input id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠"><input id="surname" placeholder="‡∏™‡∏Å‡∏∏‡∏•"></div></div>
          <div class="input-group md:col-span-4"><label>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• (‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©)</label><div class="flex gap-2"><input id="nameEn" placeholder="Firstname"><input id="surnameEn" placeholder="Lastname"></div></div>
          
          <div class="input-group col-span-2"><label class="text-red-600">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</label><input id="idCard" readonly class="bg-gray-200 cursor-not-allowed text-gray-500"></div>
          <div class="input-group"><label>‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</label><input type="date" id="birthDate"></div>
          <div class="input-group"><label>‡∏´‡∏°‡∏π‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏î</label><input id="blood"></div>
          
          <div class="col-span-4 grid grid-cols-4 gap-2">
             <div class="input-group"><label>‡∏£‡∏û.‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î</label><input id="birthHosp"></div>
             <div class="input-group"><label>‡∏ï‡∏≥‡∏ö‡∏•</label><input id="birthTam"></div>
             <div class="input-group"><label>‡∏≠‡∏≥‡πÄ‡∏†‡∏≠</label><input id="birthAmp"></div>
             <div class="input-group"><label>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</label><input id="birthProv"></div>
          </div>
          <div class="input-group"><label>‡∏™‡∏±‡∏ç‡∏ä‡∏≤‡∏ï‡∏¥</label><input id="nation" value="‡πÑ‡∏ó‡∏¢"></div>
          <div class="input-group"><label>‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏ä‡∏≤‡∏ï‡∏¥</label><input id="race" value="‡πÑ‡∏ó‡∏¢"></div>
          <div class="input-group"><label>‡∏®‡∏≤‡∏™‡∏ô‡∏≤</label><input id="reli" value="‡∏û‡∏∏‡∏ó‡∏ò"></div>
        </div>

        <div class="section-head">3. ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</div>
        <div class="bg-blue-50 p-4 rounded mb-4">
           <h4 class="font-bold underline mb-2">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≤‡∏°‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô</h4>
           <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
              <div class="input-group"><label>‡∏£‡∏´‡∏±‡∏™‡∏ö‡πâ‡∏≤‡∏ô</label><input id="houseIdReg"></div>
              <div class="input-group"><label>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</label><input id="noReg"></div>
              <div class="input-group"><label>‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà</label><input id="mooReg"></div>
              <div class="input-group"><label>‡∏ñ‡∏ô‡∏ô</label><input id="roadReg"></div>
              <div class="input-group"><label>‡∏ï‡∏≥‡∏ö‡∏•</label><input id="tamReg"></div>
              <div class="input-group"><label>‡∏≠‡∏≥‡πÄ‡∏†‡∏≠</label><input id="ampReg"></div>
              <div class="input-group"><label>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</label><input id="provReg"></div>
              <div class="input-group"><label>‡∏£‡∏´‡∏±‡∏™ ‡∏õ‡∏ì.</label><input id="zipReg"></div>
              <div class="input-group col-span-2"><label>‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label><input id="phoneReg"></div>
           </div>
        </div>
        <div class="bg-gray-50 p-4 rounded">
           <h4 class="font-bold underline mb-2">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h4>
           <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
              <div class="input-group"><label>‡∏£‡∏´‡∏±‡∏™‡∏ö‡πâ‡∏≤‡∏ô</label><input id="houseIdCur"></div>
              <div class="input-group"><label>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</label><input id="noCur"></div>
              <div class="input-group"><label>‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà</label><input id="mooCur"></div>
              <div class="input-group"><label>‡∏ñ‡∏ô‡∏ô</label><input id="roadCur"></div>
              <div class="input-group"><label>‡∏ï‡∏≥‡∏ö‡∏•</label><input id="tamCur"></div>
              <div class="input-group"><label>‡∏≠‡∏≥‡πÄ‡∏†‡∏≠</label><input id="ampCur"></div>
              <div class="input-group"><label>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</label><input id="provCur"></div>
              <div class="input-group"><label>‡∏£‡∏´‡∏±‡∏™ ‡∏õ‡∏ì.</label><input id="zipCur"></div>
              <div class="input-group col-span-2"><label>‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label><input id="phoneCur"></div>
           </div>
        </div>

        <div class="section-head">4. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å</div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
           <div class="input-group">
              <label>‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏Å‡∏ô‡∏≠‡∏ô</label>
              <select id="livingType"><option>‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏ö‡∏¥‡∏î‡∏≤‡∏°‡∏≤‡∏£‡∏î‡∏≤</option><option>‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏ç‡∏≤‡∏ï‡∏¥</option><option>‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option></select>
              <input id="livingOther" placeholder="‡∏£‡∏∞‡∏ö‡∏∏ (‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏∑‡πà‡∏ô‡πÜ)" class="mt-2">
           </div>
           <div>
               <label class="block font-bold mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≤‡∏î‡πÅ‡∏Ñ‡∏•‡∏ô</label>
               <div class="flex gap-4 flex-wrap">
                  <label><input type="checkbox" name="lacks" value="‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"> ‡∏Ç‡∏≤‡∏î‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
                  <label><input type="checkbox" name="lacks" value="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏ö‡∏ö"> ‡∏Ç‡∏≤‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏ö‡∏ö</label>
                  <label><input type="checkbox" name="lacks" value="‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô"> ‡∏Ç‡∏≤‡∏î‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô</label>
               </div>
           </div>
        </div>
        
        <div class="mt-4 p-3 border rounded">
           <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
              <div class="input-group"><label>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°</label><input id="incomeTotal" type="number"></div>
              <div class="input-group"><label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</label><input id="members" type="number"></div>
              <div class="input-group"><label>‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢/‡∏Ñ‡∏ô</label><input id="incomeAvg" type="number"></div>
              <div class="input-group"><label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡∏à‡∏ô</label><select id="povertyStatus"><option>‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå</option><option>‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏¢‡∏≤‡∏Å‡∏à‡∏ô</option></select></div>
           </div>
        </div>

        <div class="mt-4 p-3 border rounded">
           <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
              <div class="input-group"><label>‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</label><select id="commuteMethod"><option>‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏ó‡πâ‡∏≤</option><option>‡∏û‡∏≤‡∏´‡∏ô‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏µ‡∏¢‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£</option><option>‡∏û‡∏≤‡∏´‡∏ô‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£</option></select></div>
              <div class="input-group"><label>‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ô‡∏≤‡∏ó‡∏µ)</label><input id="commuteTime" type="number"></div>
              <div class="input-group"><label>‡∏ó‡∏≤‡∏á‡∏•‡∏π‡∏Å‡∏£‡∏±‡∏á (‡∏°.)</label><input id="distDirt" type="number" value="0"></div>
              <div class="input-group"><label>‡∏ó‡∏≤‡∏á‡∏•‡∏≤‡∏î‡∏¢‡∏≤‡∏á (‡∏°.)</label><input id="distConcrete" type="number" value="0"></div>
           </div>
        </div>
        
        <div class="section-head">5. ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</div>
        <div class="grid grid-cols-2 gap-4">
           <div class="input-group"><label>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡∏Å‡∏Å.)</label><input id="weight" type="number"></div>
           <div class="input-group"><label>‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á (‡∏ã‡∏°.)</label><input id="height" type="number"></div>
        </div>

        <div class="section-head">6. ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß</div>
        <div class="input-group mb-2">
           <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏†‡∏≤‡∏û‡∏ö‡∏¥‡∏î‡∏≤-‡∏°‡∏≤‡∏£‡∏î‡∏≤</label>
           <select id="parentsStatus"><option>‡∏à‡∏î‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏°‡∏£‡∏™</option><option>‡πÑ‡∏°‡πà‡∏à‡∏î‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</option><option>‡∏´‡∏¢‡πà‡∏≤‡∏£‡πâ‡∏≤‡∏á</option><option>‡πÅ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà</option><option>‡∏ö‡∏¥‡∏î‡∏≤‡∏ñ‡∏∂‡∏á‡πÅ‡∏Å‡πà‡∏Å‡∏£‡∏£‡∏°</option><option>‡∏°‡∏≤‡∏£‡∏î‡∏≤‡∏ñ‡∏∂‡∏á‡πÅ‡∏Å‡πà‡∏Å‡∏£‡∏£‡∏°</option></select>
        </div>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
           <div class="input-group"><label>‡∏û‡∏µ‡πà‡∏ä‡∏≤‡∏¢</label><input id="bro" type="number" value="0"></div>
           <div class="input-group"><label>‡∏û‡∏µ‡πà‡∏™‡∏≤‡∏ß</label><input id="sis" type="number" value="0"></div>
           <div class="input-group"><label>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏¢‡∏π‡πà</label><input id="studySib" type="number" value="0"></div>
           <div class="input-group"><label>‡∏ô‡∏£.‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏∏‡∏ï‡∏£‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà</label><input id="childOrder" type="number"></div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
           <div class="bg-blue-50 p-3 rounded">
              <h4 class="font-bold underline text-blue-900 mb-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏¥‡∏î‡∏≤</h4>
              <div class="input-group"><label>‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£</label><input id="dadId"></div>
              <div class="input-group"><label>‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</label><input id="dadName"></div>
              <div class="flex gap-2">
                 <div class="input-group w-1/2"><label>‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</label><input id="dadJob"></div>
                 <div class="input-group w-1/2"><label>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</label><input id="dadIncome"></div>
              </div>
              <div class="input-group"><label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label><input id="dadPhone"></div>
           </div>
           <div class="bg-pink-50 p-3 rounded">
              <h4 class="font-bold underline text-pink-900 mb-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏£‡∏î‡∏≤</h4>
              <div class="input-group"><label>‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£</label><input id="momId"></div>
              <div class="input-group"><label>‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</label><input id="momName"></div>
              <div class="flex gap-2">
                 <div class="input-group w-1/2"><label>‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</label><input id="momJob"></div>
                 <div class="input-group w-1/2"><label>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</label><input id="momIncome"></div>
              </div>
              <div class="input-group"><label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label><input id="momPhone"></div>
           </div>
        </div>

        <div class="mt-4 p-3 border rounded border-gray-400">
           <h4 class="font-bold underline">‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á (‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏û‡πà‡∏≠‡πÅ‡∏°‡πà)</h4>
           <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
              <div class="input-group"><label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå</label><input id="guardRel"></div>
              <div class="input-group col-span-2"><label>‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</label><input id="guardName"></div>
              <div class="input-group"><label>‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</label><input id="guardJob"></div>
              <div class="input-group"><label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label><input id="guardPhone"></div>
           </div>
           <div class="input-group mt-2"><label>‡∏Ç‡∏ì‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏Ñ‡∏∑‡∏≠</label><select id="currentGuard"><option>‡∏ö‡∏¥‡∏î‡∏≤</option><option>‡∏°‡∏≤‡∏£‡∏î‡∏≤</option><option>‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option></select></div>
        </div>

        <button type="submit" id="btnSubmit" class="w-full bg-blue-900 text-white font-bold py-4 rounded-lg mt-8 hover:bg-blue-800 text-xl shadow-lg transition">
           ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        </button>
      </form>
    </div>
  </div>

  <script>
    // üî¥üî¥üî¥ ‡πÉ‡∏™‡πà URL ‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ üî¥üî¥üî¥
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxtWZwXSFcbdrrPZSLrs4kmEDYB4fqx3MxUs0Wo40lgkAyIi_6C-j0AJ3YZgWOBJ16AHw/exec'; 

    function handleLogin(e) {
      e.preventDefault();
      const idCard = document.getElementById('loginIdCard').value;
      if(idCard.length !== 13) { alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£ 13 ‡∏´‡∏•‡∏±‡∏Å'); return; }

      const btn = document.getElementById('btnLogin');
      btn.innerText = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...'; btn.disabled = true;

      // ‡∏™‡πà‡∏á request 'login' ‡πÑ‡∏õ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
      fetch(SCRIPT_URL, {
        method: 'POST',
        body: JSON.stringify({ action: 'login', idCard: idCard })
      })
      .then(res => res.json())
      .then(json => {
        // ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Login -> ‡πÇ‡∏ä‡∏ß‡πå‡∏´‡∏ô‡πâ‡∏≤ Form
        document.getElementById('loginSection').classList.add('hidden');
        document.getElementById('formSection').style.display = 'block';
        
        // ‡∏•‡πá‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£ ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ
        document.getElementById('idCard').value = idCard;

        if (json.found) {
           alert('‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏° ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏ó‡πà‡∏≤‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ');
           populateForm(json.data);
           document.getElementById('lastUpdateDate').innerText = '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°';
        } else {
           alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏° ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏£‡∏≠‡∏Å‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà');
           document.getElementById('lastUpdateDate').innerText = '‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏£‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà';
        }
      })
      .catch(err => alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠'))
      .finally(() => { btn.innerText = '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö'; btn.disabled = false; });
    }

    function populateForm(data) {
       // Loop ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á input ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
       for (const key in data) {
          const el = document.getElementById(key);
          if (el && el.type !== 'checkbox') {
             el.value = data[key];
          }
       }
       // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Checkbox
       if (data.docs) {
          data.docs.forEach(val => {
             const cb = document.querySelector(`input[name="docs"][value="${val}"]`);
             if(cb) cb.checked = true;
          });
       }
       if (data.lacks) {
          data.lacks.forEach(val => {
             const cb = document.querySelector(`input[name="lacks"][value="${val}"]`);
             if(cb) cb.checked = true;
          });
       }
    }

    function submitForm(e) {
      e.preventDefault();
      const btn = document.getElementById('btnSubmit');
      btn.innerText = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á PDF...'; btn.disabled = true;

      // ‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
      let data = {};
      document.querySelectorAll('input:not([type="checkbox"]), select').forEach(el => data[el.id] = el.value);
      
      // ‡∏£‡∏ß‡∏° Checkbox
      let getChecks = (name) => Array.from(document.querySelectorAll(`input[name="${name}"]:checked`)).map(cb => cb.value);
      data.docs = getChecks('docs');
      data.lacks = getChecks('lacks');

      // ‡∏™‡πà‡∏á action: 'save'
      fetch(SCRIPT_URL, {
        method: 'POST',
        body: JSON.stringify({ action: 'save', data: data })
      })
      .then(res => res.json())
      .then(json => {
         if(json.success) {
            if(confirm('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Å‡∏î‡∏ï‡∏Å‡∏•‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π PDF')) {
               window.location.href = json.url;
            }
         } else {
            alert('Error: ' + json.error);
         }
      })
      .finally(() => { btn.innerText = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'; btn.disabled = false; });
    }

    function logout() {
       location.reload();
    }
  </script>
</body>
</html>
